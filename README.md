# PDF Reports Generator

Генератор PDF отчетов. К приложению можно обращаться как напрямую (через REST/gRPC запросы), так и через клиентское приложение.

## Описание процесса генерации

1. Когда на сервис поступает POST запрос на генерацию отчета:
   - ID задачи и ее статус (по умолчанию `WAITING`) записывается в PostgreSQL;
   - Тело запроса с данными для отчета в формате JSON отправляется в Kafka.

2. Отдельный микросервис `BackgroundWorker` просматривает записи из Kafka и обрабатывает их:
   - Статус задачи в БД изменяется на `IN PROCESS`.
   - Данные для отчета из Kafka используются для генерации PDF с помощью библиотеки `QuestPDF`;
   - Сгенерированный файл отправляется на MinIO в соответствующий bucket "reports";
   - Ссылка на файл в Minio привязывается к соответствующей записи в PostgreSQL;
   - Если в процессе генерирования отчета произошла ошибка, задаче будет присвоен статус `ERROR`; отчет будет отправлен на Sentry.

3. Пользователь может получить статус отчета и ссылку на него:
   - Отправив ID отчета на эндпоинт GET, пользователь получит статус `READY` и ссылку на отчет в хранилище S3 (Minio), откуда сможет скачать файл.

## Использование

Чтобы запустить приложение на локальной машине с использованием Docker Compose, выполните следующие шаги:

1. Убедитесь, что Docker установлен и запущен;
2. Склонируйте репозиторий с проектом;
3. Выполните команду `docker-compose up` из корня проекта;
4. Убедитесь, что все необходимые сервисы запущены:
   - PostgreSQL,
   - Kafka,
   - Minio,
   - Backend (REST и GRPC),
   - Frontend;
5. Откройте клиентское приложение в браузере по адресу [localhost:3000](http://localhost:3000).

## Требования к окружению

- Docker;
- Docker Compose.